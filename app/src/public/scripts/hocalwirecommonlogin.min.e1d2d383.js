"use strict";!function(){function bindEvents(){}function bindApplyForm(){$el.find(".js-btn-submit-verify").on("click",function(){var $parent=$el.find(".form-verify"),otp=$parent.find("input#otp").val(),error=!1;return otp&&""!=otp&&" "!=otp||($parent.find("#err-common").slideDown(),error=!0),0==error&&validateOTP($parent,!1),!1})}function validateOTP($form,isInternship){var url=window.Constants.url.xhrVerify?window.Constants.url.xhrVerify:"/xhr/admin/verify",options={contentType:"application/x-www-form-urlencoded; charset=utf-8"};Hocalwire.Services.post(url,$el.serialize(),options).then(function(data){if(0==data.errorCode)window.location="/";else{var message="Unable to verify your OTP";-14==data.errorCode&&(message="OTP you have entered is not correct."),$form.find("#err-common").html(message),$form.find("#err-common").slideDown()}},function(e){var params={};params.title="Whoops!! there is some error",params.message="Some error occured while posting your entry. Please retry again",params.actionOneLabel="Close",Hocalwire.Services.AnalyticsService.sendGAEvent("careers","error","applyJob"),Utils.dialog(params)})}var $el;$el=$("#verify-page"),bindEvents(),bindApplyForm()}(),function(){function bindEvents(){}function bindApplyForm(){$el.find(".js-btn-submit-login").on("click",function(){var $parent=$el.find(".login-form"),mobile=$parent.find("input#mobile_no").val(),email=$parent.find("input#email").val(),password=$parent.find("input#password").val();$parent.find(".error").slideUp();var error=!1;return mobile||email?$parent.find("#err-name").slideUp():(mobile?$parent.find("#err-email").slideDown():$parent.find("#err-mobile").slideDown(),error=!0),password&&""!=password&&" "!=password?$parent.find("#err-password").slideUp():($parent.find("#err-password").slideDown(),error=!0),0==error&&sendLoginRequest($parent,!1),!1})}function sendLoginRequest($form,isInternship){var url=window.Constants.url.xhrVerify?window.Constants.url.xhrLogin:"/xhr/admin/login",options={contentType:"application/x-www-form-urlencoded; charset=utf-8"};Utils.showLoader(5e3),Hocalwire.Services.post(url,$form.serialize(),options).then(function(data){if(Utils.hideLoader(),0==data.errorCode){var redirectURL=data.redirectURL;if(!redirectURL)for(var queryString=location.search,params=queryString.substring(1).split("&"),i=0;i<params.length;i++){var pair=params[i].split("=");(pair[0]&&"redirecturl"==pair[0]||"redirectUrl"==pair[0])&&(redirectURL=decodeURIComponent(pair[1]))}redirectURL||(redirectURL="/"),window.location=redirectURL}else if(console.log("Inside login error"),-8==data.errorCode)"otp"==mode?$form.find("#err-common").html("Phone Number or Pasword does not match."):$form.find("#err-common").html("Email or Pasword does not match."),$form.find("#err-common").slideDown();else if(-18==data.errorCode){if("otp"==mode){var phoneNo=$(".login-form input#mobile_no").val();$form.find("#err-common").html("You have not authorized, verified your phone. Kindly verify it using otp and try again.").append("</br><a class='generate_otp_btn' href='/verify-email?regenerate-phone=true&mobile="+phoneNo+"'><i>Generate new OTP</i></a></br>")}else $form.find("#err-common").html("You have not authorized your email. Kindly authorize it and try again.").append("</br><a class='generate_otp_btn' href='/verify-email?regenerate-email=true' target='_blank'><i>Generate Verification link</i></a></br>");$form.find("#err-common").slideDown()}else $form.find("#err-common").html("Unable to login. Please try again later."),$form.find("#err-common").slideDown()},function(e){Utils.hideLoader(),$form.find("#err-common").html("Unable to login. Please try again later."),$form.find("#err-common").slideDown()})}var $el;$el=$("#login-page"),bindEvents(),bindApplyForm();var mode=$("#content").data("registration-mode")}(),function(){function bindEvents(){}function bindApplyForm(){$el.find(".js-btn-submit-register").on("click",function(){if(!sendingRegisterRequest){sendingRegisterRequest=!0;var $parent=$el.find(".register-form"),error=!1,terms=$el.find(".js-verify-term-conditions"),isChecked=terms.is(":checked"),mobile=$parent.find("input#mobile_no").val(),password=$parent.find("input#password").val(),firstName=$parent.find("input#firstName").val(),email=($parent.find("input#lastName").val(),$parent.find("input#email").val()),confirmPassword=$parent.find("input#confirm_pass").val();return firstName&&""!=firstName&&" "!=firstName?$parent.find("#err-firstName").slideUp():($parent.find("#err-firstName").slideDown(),error=!0),"otp"==mode||email&&""!=email&&" "!=email?$parent.find("#err-email").slideUp():($parent.find("#err-email").slideDown(),error=!0),"otp"!=mode||mobile&&""!=mobile&&" "!=mobile?$parent.find("#err-mobile").slideUp():($parent.find("#err-mobile").slideDown(),error=!0),password&&""!=password&&" "!=password?$parent.find("#err-password").slideUp():($parent.find("#err-password").slideDown(),error=!0),confirmPassword&&""!=confirmPassword&&" "!=confirmPassword?$parent.find("#err-confirm-password").slideUp():($parent.find("#err-confirm-password").slideDown(),error=!0),error||password==confirmPassword||($parent.find("#err-confirm-password-no-match").slideDown(),error=!0,setTimeout(function(){$parent.find("#err-confirm-password-no-match").slideUp()},4e3)),isChecked?(0==error?sendRegisterRequest($parent,!1):sendingRegisterRequest=!1,!1):($el.find("#err-check-terms-condition").slideDown(),error=!0,setTimeout(function(){$el.find("#err-check-terms-condition").slideUp()},4e3),sendingRegisterRequest=!1,!1)}})}function sendRegisterRequest($el,isInternship){var url=window.Constants.url.xhrVerify?window.Constants.url.xhrRegister:"/xhr/admin/register",options={contentType:"application/x-www-form-urlencoded; charset=utf-8"};$("#register-page-response-message-error").removeClass("has-error"),Utils.showLoader(5e3),Hocalwire.Services.post(url,$el.serialize(),options).then(function(data){if(Utils.hideLoader(),0==data.errorCode){var validation=data.validation;sendingRegisterRequest=!1,"otp"==mode?($("#register-page").hide(),$(".verify-otp-wrapper").parent().removeClass("hide"),$(".verify-otp-wrapper").removeClass("hide"),setTimeout(function(){$("html,body").animate({scrollTop:$(window).scrollTop()-250})},100)):"email"==validation?($("#register-page").hide(),$("#register-page-response-message").html("An email has been sent to you at given email address. <br>Please verify your email address by clicking on the provided link."),$("#register-page-response-message").show(),setTimeout(function(){$("html,body").animate({scrollTop:$(window).scrollTop()-250})},100)):($("#register-page").hide(),$("#register-page-response-message").html("Registration Successfull."),$("#register-page-response-message").show(),setTimeout(function(){$("html,body").animate({scrollTop:$(window).scrollTop()-250})},100))}else console.log("Inside login error"),$("#register-page").hide(),"-4"==data.errorCode?"otp"==mode?$("#register-page-response-message").html("Mobile Number is already registered. Please use differnent mobile or try to login."):$("#register-page-response-message").html("Email Address is already registered. Please use differnent email address or try to login."):"-10"==data.errorCode?$("#register-page-response-message").html("Email id or Phone number already registered."):$("#register-page-response-message").html("Error occured during registration. Please try again."),$("#register-page-response-message").addClass("has-error").show()},function(e){Utils.hideLoader(),$("#register-page-response-message").html("Error occured during registration. Please try again."),$("#register-page-response-message").addClass("has-error").show()})}function bindForEmailAndOTPVerification(){var $el1=$("#content"),$btn=$el1.find(".js-btn-submit-regenerate-email-code");$btn.on("click",function(){var email=$el1.find("#email-address"),regen=$el1.find(".regenrate-message");if(!email.val())return void regen.html("Please Enter Email Id").removeClass("hide");var data={email:email.val()},url=window.Constants.url.xhrRegenerateEmailCode?window.Constants.url.xhrRegenerateEmailCode:"/xhr/admin/login/regenerateEmailCode";Utils.showLoader(5e3),Hocalwire.Services.post(url,data).then(function(){Utils.hideLoader(),"otp"==mode?($(".verify-otp-wrapper").removeClass("hide"),setTimeout(function(){$("html,body").animate({scrollTop:$(window).scrollTop()-250})},100)):(regen.html("Email has been sent to you for verification. Please check your inbox").removeClass("hide"),$(".box-wrapper-verify").addClass("hide"),setTimeout(function(){$("html,body").animate({scrollTop:$(window).scrollTop()-250})},100))},function(){Utils.hideLoader(),regen.html("Verification code generation failed. Please try again later").removeClass("hide")})});var $btn1=$el1.find(".js-btn-submit-otp-code");$btn1.on("click",function(){var otp=$el1.find("#otp-address"),phoneNo=$el1.find("#email-address");phoneNo&&phoneNo.length||(phoneNo=$el1.find("#email")),!otp||!otp.length;var data={phoneNo:phoneNo.val(),otp:otp.val()},regen=$el1.find(".regenrate-message"),url=window.Constants.url.verify?window.Constants.url.verify:"/xhr/admin/login/verifyUser",externalTarget=$el1.find("#external_target_for_otp_verify");Utils.showLoader(5e3),Hocalwire.Services.post(url,data).then(function(){Utils.hideLoader(),externalTarget&&externalTarget.length?(externalTarget.removeClass("hide"),externalTarget.find("form input#code").val(otp.val()),externalTarget.find("form input#email").val(phoneNo.val())):(regen.html("Your OTP is verified. Redirecting to login page").removeClass("hide"),setTimeout(function(){window.location="/login"},3e3))},function(){Utils.hideLoader(),regen.html("OTP verification failed. Please provide correct OTP").removeClass("hide")})})}var $el;$el=$("#register-page"),bindEvents(),bindApplyForm();var mode=$("#content").data("registration-mode");bindForEmailAndOTPVerification();var sendingRegisterRequest=!1}(),function(){function bindEvents(){}function bindApplyForm(){$el.find(".js-btn-submit-forgotPassword").off("click"),$el.find(".js-btn-submit-forgotPassword").on("click",function(){var $parent=$el.find(".form-forgotPassword"),mobile=$parent.find("input#email").val(),error=!1;return mobile&&""!=mobile&&" "!=mobile||($parent.find("#err-email").slideDown(),error=!0),0==error&&sendLoginRequest($parent,!1),!1}),$el.find(".js-btn-submit-reset-password").off("click"),$el.find(".js-btn-submit-reset-password").on("click",function(){var $parent=$el.find(".form-resetPassword"),password=$parent.find("input#password").val(),retype=$parent.find("input#retype-password").val(),error=!1;return password&&""!=password&&" "!=password||($parent.find("#err-password").slideDown(),error=!0),retype&&""!=retype&&" "!=retype||($parent.find("#err-password-retype").slideDown(),error=!0),retype&&""!=password&&retype==password||($parent.find("#err-password-not-match").slideDown(),error=!0),0==error&&sendResetRequest($parent,!1),!1})}function sendLoginRequest($el,isInternship){var url=window.Constants.url.xhrForgotPassword?window.Constants.url.xhrForgotPassword:"/xhr/admin/login/forgotPassword",options={contentType:"application/x-www-form-urlencoded; charset=utf-8"};Utils.showLoader(5e3),Hocalwire.Services.post(url,$el.serialize(),options).then(function(data){Utils.hideLoader(),0==data.errorCode?"otp"==mode?($(".verify-otp-wrapper").removeClass("hide"),$(".verify-otp-wrapper").parent().removeClass("hide")):($(".success-msg").removeClass("hide"),setTimeout(function(){window.location="/"},3e3)):($(".error-msg").removeClass("hide"),console.log("Inside login error"))},function(e){$(".error-msg").removeClass("hide")})}function sendResetRequest($el){var url=window.Constants.url.xhrResetPassword?window.Constants.url.xhrResetPassword:"/xhr/admin/login/reset-password",options={contentType:"application/x-www-form-urlencoded; charset=utf-8"};Utils.showLoader(5e3),Hocalwire.Services.post(url,$el.serialize(),options).then(function(data){Utils.hideLoader(),0==data.errorCode?($(".success-msg").removeClass("hide"),setTimeout(function(){window.location="/login"},5e3)):($(".error-msg").removeClass("hide"),console.log("Inside login error"))},function(e){$(".error-msg").removeClass("hide")})}var $el;$el=$("#forgot-password-page");var mode=$("#content").data("registration-mode");bindEvents(),bindApplyForm();var a=$("#status-page-wrapper");if(a&&a.length){var products=[];if(a.data("clear-cart")){var partner=a.data("partner"),o={};o[partner]=products,localStorage.products=localStorage.products?localStorage.products:{},localStorage.products=JSON.stringify(o)}}}(),function(){function bindEvents(){}function bindApplyForm(){$el.find(".js-btn-submit-subscription").on("click",function(){var $parent=$el.find(".subscription-form"),error=!1;return 0==error&&submitSubscriptionForm($parent),!1})}function submitSubscriptionForm($form){var url="/xhr/admin/submitSubscription",options={contentType:"application/x-www-form-urlencoded; charset=utf-8"};Hocalwire.Services.post(url,$form.serialize(),options).then(function(data){console.log("======================>> Insider submitSubscriptionForm"),console.log(data)},function(e){var params={};params.title="Whoops!! there is some error",params.message="Some error occured while posting your entry. Please retry again",params.actionOneLabel="Close",Hocalwire.Services.AnalyticsService.sendGAEvent("careers","error","applyJob"),Utils.dialog(params)})}var $el;$el=$("#subscription-details-page"),bindEvents(),bindApplyForm()}(),function(){function insertTemplateOnLoad(){var pageType=window.trackingPageType,hasLogin=window.hasLogin,isLoggedIn=window.isLoggedIn;if("true"==hasLogin){if("false"==isLoggedIn&&("home"==pageType||"news_listing"==pageType||"news_details"==pageType)){var $dialog=$("#headerSlider");$dialog&&($dialog.slideDown(),setTimeout(function(){$dialog.slideUp()},5e3))}"true"==isLoggedIn&&$(".header_static_links").each(function(){var href=$(this).attr("href");"/login"==href&&($(this).attr("href",""),$(this).html("Logged in as: "+window.loggedInAs))})}}window.addEventListener?window.addEventListener("load",function(){insertTemplateOnLoad()}):window.attachEvent("load",function(){insertTemplateOnLoad()})}();