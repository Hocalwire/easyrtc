"use strict";!function(){function bindForSubmit(){$el.find(".js-submit-for-email").on("click",function(){var error=!1,mails=$parent.find("#to_email").val(),name=$parent.find("#name").val(),mail=$parent.find("#from_email").val(),hasCaptcha=($parent.find("#message").val(),$("#captcha_wrapper"));return mails&&""!=mails&&" "!=mails?errorMessage.slideUp():(errorMessage.html("Please enter email address to send mail to").slideDown(),error=!0),name&&""!=name&&" "!=name?errorMessage.slideUp():(errorMessage.html("Please enter your name").slideDown(),error=!0),mail&&""!=mail&&" "!=mail?errorMessage.slideUp():(errorMessage.html("Please enter your name").slideDown(),error=!0),0==error&&checkCaptchaAndSubmit($parent,hasCaptcha.length),!1})}function checkCaptchaAndSubmit($form,hasCaptcha){var type=$el.find("#story-content-type").attr("data-type"),url=$el.find("#story-url").attr("href"),$parent=$el.find("#emailarticle"),mails=$parent.find("#to_email").val(),name=$parent.find("#name").val(),mail=$parent.find("#from_email").val(),message=$parent.find("#message").val(),data={to_email:mails,from_email:mail,type:type,url:url,medium:"mail",message:message,from_name:name};if(hasCaptcha){var url="/xhr/admin/validateCaptch",options={contentType:"application/json"},captcha=$("#g-recaptcha-response").val();if(!captcha)return void errorMessage.html("Please validate that you are human").slideDown();var captchadata={captcha:captcha};Hocalwire.Services.post(url,captchadata,options).then(function(responseData){return 0!=responseData.errorCode?void errorMessage.html("Captcha Check Failed. Please validate that you are human").slideDown():void sendEmailToServer(data)},function(e){$("#status-message-div").addClass("has-error"),errorMessage.html("Captcha Check Failed. Please validate that you are human").slideDown()})}else sendEmailToServer(data)}function sendEmailToServer(data){var url="/xhr/admin/shareArticleByEmail",options={contentType:"application/json"};$("#status-message-div").removeClass("has-error"),Hocalwire.Services.post(url,data,options).then(function(data){0==data.errorCode?($("#status-message-div").html("Article Shared Successfuly"),$("#status-message-div").show()):($("#status-message-div").addClass("has-error"),$("#status-message-div").html("Error Occured While Sharing Article"),$("#status-message-div").show())},function(e){$("#status-message-div").addClass("has-error"),$("#status-message-div").html("Error Occured While Sharing Article. Something went wrong"),$("#status-message-div").show()})}var $el,errorMessage,$parent,initalized=!1;window.initialiseScriptsBinding=function(){$el=$("#send-email-page"),$parent=$el.find("#emailarticle"),errorMessage=$parent.find("#status-message-div"),initalized||bindForSubmit()}}();